# üìã Changelog - BERT Integration

## –î–∞—Ç–∞: 2025-12-18

### ‚ú® –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

#### 1. `src/bert_loyalty.py` (–ù–û–í–´–ô)
**–ú–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å BERT –º–æ–¥–µ–ª—å—é –¥—Ä—É–≥–∞**

–ö–ª–∞—Å—Å—ã:
- `BertLoyaltyAnalyzer` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏

–ú–µ—Ç–æ–¥—ã:
- `load_model()` - –∑–∞–≥—Ä—É–∑–∫–∞ BERT –º–æ–¥–µ–ª–∏
- `analyze_dataframe(df)` - –∞–Ω–∞–ª–∏–∑ DataFrame —Å –æ—Ç–∑—ã–≤–∞–º–∏
- `predict_batch(texts)` - –±–∞—Ç—á-–ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –¥–ª—è —Å–ø–∏—Å–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤
- `calculate_product_stats(df, min_reviews)` - —Ä–∞—Å—á—ë—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –ø—Ä–æ–¥—É–∫—Ç–∞–º —Å z-score
- `get_statistics(df)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ BERT –∞–Ω–∞–ª–∏–∑–∞

–§—É–Ω–∫—Ü–∏–∏:
- `compare_with_keyword_method(df)` - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ BERT –∏ keyword –º–µ—Ç–æ–¥–æ–≤

–ù–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ DataFrame –ø–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞:
- `bert_loyalty_prob` - –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ [0, 1]
- `bert_loyalty_high` - –ª–æ—è–ª—å–Ω—ã–π –ø–æ —Å—Ç—Ä–æ–≥–æ–º—É –ø–æ—Ä–æ–≥—É (0.718)
- `bert_loyalty_medium` - –ª–æ—è–ª—å–Ω—ã–π –ø–æ —Å—Ä–µ–¥–Ω–µ–º—É –ø–æ—Ä–æ–≥—É (0.55)
- `bert_loyalty_low` - –ª–æ—è–ª—å–Ω—ã–π –ø–æ –º—è–≥–∫–æ–º—É –ø–æ—Ä–æ–≥—É (0.40)
- `bert_loyalty_class` - –∫–ª–∞—Å—Å: 'loyal' –∏–ª–∏ 'not_loyal'

#### 2. `BERT_INTEGRATION.md` (–ù–û–í–´–ô)
–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ BERT –º–æ–¥–µ–ª–∏

#### 3. `QUICK_START.md` (–ù–û–í–´–ô)
–ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞

#### 4. `CHANGELOG_BERT.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

### üîÑ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### `app.py`

##### –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã:
```python
from src.bert_loyalty import BertLoyaltyAnalyzer, compare_with_keyword_method
```

##### –ù–æ–≤–∞—è —Å–µ–∫—Ü–∏—è –≤ sidebar (—Å—Ç—Ä–æ–∫–∞ ~162-169):
```python
# –ù–û–í–û–ï: BERT –∞–Ω–∞–ª–∏–∑
st.sidebar.markdown("---")
st.sidebar.markdown("### ü§ñ BERT –ê–Ω–∞–ª–∏–∑")
run_bert = st.sidebar.checkbox(
    "üß† –ó–∞–ø—É—Å—Ç–∏—Ç—å BERT –∞–Ω–∞–ª–∏–∑ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏",
    value=False,
    help="–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—É—á–µ–Ω–Ω—É—é BERT –º–æ–¥–µ–ª—å –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏"
)
```

##### –û–±—Ä–∞–±–æ—Ç–∫–∞ BERT –∞–Ω–∞–ª–∏–∑–∞ (—Å—Ç—Ä–æ–∫–∞ ~196-208):
```python
# BERT –∞–Ω–∞–ª–∏–∑
if run_bert:
    bert_key = f"bert_{data_hash}"
    if bert_key not in st.session_state:
        with st.spinner("üß† BERT –∞–Ω–∞–ª–∏–∑ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç)..."):
            analyzer = BertLoyaltyAnalyzer()
            if analyzer.is_available():
                st.session_state[bert_key] = analyzer.analyze_dataframe(df)
                st.success("‚úÖ BERT –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à—ë–Ω!")
            else:
                st.error("‚ùå BERT –º–æ–¥–µ–ª—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞...")
                st.session_state[bert_key] = df
    df = st.session_state[bert_key].copy()
```

##### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ (—Å—Ç—Ä–æ–∫–∞ ~239-261):
```python
# –í–∫–ª–∞–¥–∫–∏
tabs = ["üìä –û–±–∑–æ—Ä", "üìà –õ–æ—è–ª—å–Ω–æ—Å—Ç—å", "üì¶ –¢–æ–≤–∞—Ä—ã", "üîÑ –ö—ç—Ç—á-—Ñ—Ä–∞–∑—ã"]

# –î–æ–±–∞–≤–ª—è–µ–º BERT –≤–∫–ª–∞–¥–∫—É –µ—Å–ª–∏ –∞–Ω–∞–ª–∏–∑ –∑–∞–ø—É—â–µ–Ω
if 'bert_loyalty_prob' in df.columns:
    tabs.append("üß† BERT –ê–Ω–∞–ª–∏–∑")

tabs.extend(["üí¨ –û—Ç–∑—ã–≤—ã", "üìã –î–∞–Ω–Ω—ã–µ"])

all_tabs = st.tabs(tabs)

# –†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –≤–∫–ª–∞–¥–∫–∏
tab_idx = 0
tab1 = all_tabs[tab_idx]; tab_idx += 1
tab2 = all_tabs[tab_idx]; tab_idx += 1
tab3 = all_tabs[tab_idx]; tab_idx += 1
tab4 = all_tabs[tab_idx]; tab_idx += 1

# BERT –≤–∫–ª–∞–¥–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
if 'bert_loyalty_prob' in df.columns:
    tab_bert = all_tabs[tab_idx]; tab_idx += 1

tab5 = all_tabs[tab_idx]; tab_idx += 1
tab6 = all_tabs[tab_idx]; tab_idx += 1
```

##### –ù–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ "üß† BERT –ê–Ω–∞–ª–∏–∑" (—Å—Ç—Ä–æ–∫–∞ ~735-994):

**–†–∞–∑–¥–µ–ª—ã:**

1. **üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ BERT –∞–Ω–∞–ª–∏–∑–∞** (—Å—Ç—Ä–æ–∫–∏ 752-777)
   - –í—Å–µ–≥–æ –æ—Ç–∑—ã–≤–æ–≤
   - –õ–æ—è–ª—å–Ω—ã—Ö (—Å—Ç—Ä–æ–≥–∏–π –ø–æ—Ä–æ–≥)
   - –õ–æ—è–ª—å–Ω—ã—Ö (—Å—Ä–µ–¥–Ω–∏–π –ø–æ—Ä–æ–≥)
   - –°—Ä–µ–¥–Ω—è—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å

2. **üìà –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π BERT** (—Å—Ç—Ä–æ–∫–∏ 779-822)
   - –ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π —Å –ø–æ—Ä–æ–≥–∞–º–∏
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–æ–≤ (bar chart)

3. **üî¨ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: BERT vs Keyword –º–µ—Ç–æ–¥** (—Å—Ç—Ä–æ–∫–∏ 824-874)
   - Scatter plot: keyword score vs BERT probability
   - –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
   - –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –º–µ–∂–¥—É –º–µ—Ç–æ–¥–∞–º–∏
   - –î–∏—Å—Å–æ–Ω–∞–Ω—Å—ã (—Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è)

4. **üèÜ –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (z-score)** (—Å—Ç—Ä–æ–∫–∏ 876-994)
   - –°–ª–∞–π–¥–µ—Ä –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∏–Ω–∏–º—É–º–∞ –æ—Ç–∑—ã–≤–æ–≤
   - –ö–Ω–æ–ø–∫–∞ "üîÑ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏"
   - –ú–µ—Ç—Ä–∏–∫–∏: –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤, —Å—Ä–µ–¥–Ω—è—è –ª–æ—è–ª—å–Ω–æ—Å—Ç—å, –ª—É—á—à–∏–π z-score
   - –¢–æ–ø-10 –ø–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–π –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ (z-score)
   - –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã (–Ω–∏–∑–∫–∏–π z-score)
   - –ì—Ä–∞—Ñ–∏–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è z-scores
   - Scatter: z-score vs –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤ (—Ü–≤–µ—Ç = –∫–∞—Ç–µ–≥–æ—Ä–∏—è)
   - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
   - –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV

---

### üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

#### –î–æ–±–∞–≤–ª–µ–Ω—ã –≤ requirements (–µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç):
```
torch>=2.0.0
transformers>=4.30.0
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
```bash
pip install torch transformers
```

---

### üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏–∑ –∫–æ–¥–∞ –¥—Ä—É–≥–∞

#### ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ:
1. ‚úÖ BERT –º–æ–¥–µ–ª—å (`models_binary_fixed_v2`)
2. ‚úÖ –¢—Ä–∏ –ø–æ—Ä–æ–≥–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (0.718, 0.55, 0.40)
3. ‚úÖ Z-score –¥–ª—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
4. ‚úÖ –ë–∞–π–µ—Å–æ–≤—Å–∫–∏–π –±–∞–ª–ª (–∫–∞–∫ –Ω–∞ IMDb)
5. ‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è: –í—ã–¥–∞—é—â–∏–π—Å—è, –í—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ, –°—Ä–µ–¥–Ω–∏–π, –ù–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ, –ü—Ä–æ–±–ª–µ–º–Ω—ã–π
6. ‚úÖ Batch processing –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
7. ‚úÖ GPU support (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)

#### ‚ùå –ù–ï –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ (–Ω–µ –Ω—É–∂–Ω–æ):
- Random Forest –ø–æ–≤–µ—Ä—Ö BERT (`hybrid.py`) - –∏–∑–±—ã—Ç–æ—á–Ω–æ
- –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ (`train_bert_gpu.py`) - –∏—Å–ø–æ–ª—å–∑—É–µ–º –≥–æ—Ç–æ–≤—É—é
- Excel –æ—Ç—á—ë—Ç—ã (`business_report.py`) - –µ—Å—Ç—å CSV —ç–∫—Å–ø–æ—Ä—Ç
- Standalone —Å–∫—Ä–∏–ø—Ç—ã - –≤—Å—ë –≤ Streamlit

---

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è:
```
User ‚Üí Streamlit UI (app.py)
         ‚Üì
    BertLoyaltyAnalyzer (bert_loyalty.py)
         ‚Üì
    BERT Model (models_binary_fixed_v2/)
         ‚Üì
    Results (DataFrame + session_state)
```

#### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –ú–æ–¥–µ–ª—å: –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞: —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `st.session_state[bert_key]`
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `st.session_state['bert_product_stats']`

#### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- Batch size: 32 (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ GPU: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è
- CPU fallback: –¥–∞
- –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä: tqdm

---

### üìä –ù–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

#### –ù–∞ —É—Ä–æ–≤–Ω–µ –æ—Ç–∑—ã–≤–∞:
- `bert_loyalty_prob` - –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ (0-1)
- `bert_loyalty_class` - –∫–ª–∞—Å—Å –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏

#### –ù–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ–¥—É–∫—Ç–∞:
- `total_reviews` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤
- `loyal_high` / `loyal_medium` / `loyal_low` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ—è–ª—å–Ω—ã—Ö –ø–æ –ø–æ—Ä–æ–≥–∞–º
- `loyalty_rate_high` / `loyalty_rate_medium` / `loyalty_rate_low` - –¥–æ–ª—è –ª–æ—è–ª—å–Ω—ã—Ö
- `avg_bert_prob` - —Å—Ä–µ–¥–Ω—è—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å
- `std_bert_prob` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
- `z_score` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ ‚≠ê
- `bayesian_score` - –±–∞–π–µ—Å–æ–≤—Å–∫–∏–π –±–∞–ª–ª (–∫–∞–∫ –Ω–∞ IMDb) ‚≠ê
- `percentile_rank` - –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å (0-100)
- `relative_category` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–π –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ ‚≠ê

**‚≠ê = –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ –∫–æ–¥–∞ –¥—Ä—É–≥–∞**

---

### üé® –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

#### –ù–æ–≤—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –≤ "üß† BERT –ê–Ω–∞–ª–∏–∑":
1. **–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π BERT** —Å –ø–æ—Ä–æ–≥–∞–º–∏
2. **Bar chart —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–æ—Ä–æ–≥–æ–≤**
3. **Scatter plot: Keyword vs BERT** —Å –¥–∏–∞–≥–æ–Ω–∞–ª—å—é
4. **–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ z-scores** —Å –∑–æ–Ω–∞–º–∏
5. **Scatter plot: z-score vs –æ—Ç–∑—ã–≤–æ–≤** (—Ü–≤–µ—Ç = –∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Ä–∞–∑–º–µ—Ä = –ª–æ—è–ª—å–Ω–æ—Å—Ç—å)

---

### üì• –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

#### –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞:
1. **CSV —Å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º –ø—Ä–æ–¥—É–∫—Ç–æ–≤**
   - –ü—É—Ç—å: —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –≤ UI
   - –°–æ–¥–µ—Ä–∂–∏—Ç: –≤—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –ø—Ä–æ–¥—É–∫—Ç–∞–º (z-score, –±–∞–π–µ—Å–æ–≤—Å–∫–∏–π –±–∞–ª–ª, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)

---

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–¥—É–ª—è:
```bash
python src/bert_loyalty.py
```

–ó–∞–ø—É—Å—Ç–∏—Ç —Ç–µ—Å—Ç –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö –æ—Ç–∑—ã–≤–æ–≤.

#### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Streamlit:
1. –ó–∞–ø—É—Å—Ç–∏ `streamlit run app.py`
2. –ê–∫—Ç–∏–≤–∏—Ä—É–π BERT –∞–Ω–∞–ª–∏–∑ –≤ sidebar
3. –î–æ–∂–¥–∏—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
4. –ü—Ä–æ–≤–µ—Ä—å –≤–∫–ª–∞–¥–∫—É "üß† BERT –ê–Ω–∞–ª–∏–∑"

---

### üîú –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ–∏—á–∏:
1. **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –ø–æ—Ä–æ–≥–æ–≤** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç
2. **–ê–Ω—Å–∞–º–±–ª—å –º–µ—Ç–æ–¥–æ–≤** - –∫–æ–º–±–∏–Ω–∞—Ü–∏—è BERT + keyword
3. **Explain predictions** - –ø–æ—á–µ–º—É BERT —Å—á–∏—Ç–∞–µ—Ç –æ—Ç–∑—ã–≤ –ª–æ—è–ª—å–Ω—ã–º (SHAP/LIME)
4. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã** - –∫–∞–∫ –º–µ–Ω—è–µ—Ç—Å—è –ª–æ—è–ª—å–Ω–æ—Å—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏
5. **–°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è** - –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
6. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å–∞–π—Ç—ã** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –≤—ã–≤–æ–¥–æ–≤
7. **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –Ω–∞ –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∞—Ö
8. **–ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏** - fine-tuning –Ω–∞ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

### üìù –ó–∞–º–µ—Ç–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

#### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä–æ–≥:
```python
# –í bert_loyalty.py
self.threshold = 0.718  # –ò–∑–º–µ–Ω–∏ –∑–¥–µ—Å—å
```

#### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å batch_size:
```python
# –í bert_loyalty.py, –º–µ—Ç–æ–¥ analyze_dataframe
probabilities = self.predict_batch(texts, batch_size=32)  # –ò–∑–º–µ–Ω–∏ –∑–¥–µ—Å—å
```

#### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –º–µ—Ç—Ä–∏–∫—É:
1. –î–æ–±–∞–≤—å —Ä–∞—Å—á—ë—Ç –≤ `calculate_product_stats()`
2. –î–æ–±–∞–≤—å –∫–æ–ª–æ–Ω–∫—É –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
3. –î–æ–±–∞–≤—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –≤ `app.py` –≤ —Å–µ–∫—Ü–∏–∏ BERT

---

### üéâ –ò—Ç–æ–≥–∏

**–î–æ–±–∞–≤–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞:**
- `src/bert_loyalty.py`: ~450 —Å—Ç—Ä–æ–∫
- `app.py`: ~260 —Å—Ç—Ä–æ–∫ (–Ω–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞)
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: ~600 —Å—Ç—Ä–æ–∫

**–í—Å–µ–≥–æ:** ~1310 —Å—Ç—Ä–æ–∫ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞ + –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** ~2 —á–∞—Å–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è BERT –º–æ–¥–µ–ª—å –¥—Ä—É–≥–∞ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Streamlit –ø—Ä–æ–µ–∫—Ç! üöÄ
